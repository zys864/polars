<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Examples without delta-encoding"><meta name="keywords" content="rust, rustlang, rust-lang, BitPacker"><title>BitPacker in bitpacking - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../SourceSerif4-Regular.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../FiraSans-Regular.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../FiraSans-Medium.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../SourceCodePro-Regular.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../SourceSerif4-Bold.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../SourceCodePro-Semibold.ttf.woff2"><link rel="stylesheet" type="text/css" href="../normalize.css"><link rel="stylesheet" type="text/css" href="../rustdoc.css" id="mainThemeStyle"><link rel="stylesheet" type="text/css" href="../ayu.css" disabled><link rel="stylesheet" type="text/css" href="../dark.css" disabled><link rel="stylesheet" type="text/css" href="../light.css" id="themeStyle"><script id="default-settings" ></script><script src="../storage.js"></script><script src="../crates.js"></script><script defer src="../main.js"></script>
    <noscript><link rel="stylesheet" href="../noscript.css"></noscript><link rel="alternate icon" type="image/png" href="../favicon-16x16.png"><link rel="alternate icon" type="image/png" href="../favicon-32x32.png"><link rel="icon" type="image/svg+xml" href="../favicon.svg"></head><body class="rustdoc trait"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="sidebar"><div class="sidebar-menu" role="button">&#9776;</div><a class="sidebar-logo" href="../bitpacking/index.html"><div class="logo-container"><img class="rust-logo" src="../rust-logo.png" alt="logo"></div>
        </a><h2 class="location">Trait BitPacker</h2><div class="sidebar-elems"><div class="block items"><h3 class="sidebar-title"><a href="#associated-const">Associated Constants</a></h3><div class="sidebar-links"><a href="#associatedconstant.BLOCK_LEN">BLOCK_LEN</a></div><h3 class="sidebar-title"><a href="#required-methods">Required Methods</a></h3><div class="sidebar-links"><a href="#tymethod.compress">compress</a><a href="#tymethod.compress_sorted">compress_sorted</a><a href="#tymethod.decompress">decompress</a><a href="#tymethod.decompress_sorted">decompress_sorted</a><a href="#tymethod.new">new</a><a href="#tymethod.num_bits">num_bits</a><a href="#tymethod.num_bits_sorted">num_bits_sorted</a></div><h3 class="sidebar-title"><a href="#provided-methods">Provided Methods</a></h3><div class="sidebar-links"><a href="#method.compressed_block_size">compressed_block_size</a></div><h3 class="sidebar-title"><a href="#implementors">Implementors</a></h3></div><h2 class="location">Other items in<br><a href="index.html">bitpacking</a></h2><div id="sidebar-vars" data-name="BitPacker" data-ty="trait" data-relpath=""></div><script defer src="sidebar-items.js"></script></div></nav><main><div class="width-limiter"><div class="sub-container"><a class="sub-logo-container" href="../bitpacking/index.html"><img class="rust-logo" src="../rust-logo.png" alt="logo"></a><nav class="sub"><div class="theme-picker"><button id="theme-picker" aria-label="Pick another theme!" aria-haspopup="menu" title="themes"><img width="18" height="18" alt="Pick another theme!" src="../brush.svg"></button><div id="theme-choices" role="menu"></div></div><form class="search-form"><div class="search-container"><div><select id="crate-search"><option value="All crates">All crates</option></select><input class="search-input" name="search" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"></div><button type="button" id="help-button" title="help">?</button><a id="settings-menu" href="../settings.html" title="settings"><img width="18" height="18" alt="Change settings" src="../wheel.svg"></a></div></form></nav></div><section id="main-content" class="content"><h1 class="fqn"><span class="in-band">Trait <a href="index.html">bitpacking</a>::<wbr><a class="trait" href="#">BitPacker</a><button id="copy-path" onclick="copy_path(this)" title="Copy item path to clipboard"><img src="../clipboard.svg" width="19" height="18" alt="Copy item path"></button></span><span class="out-of-band"><span id="render-detail"><a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">[<span class="inner">&#x2212;</span>]</a></span><a class="srclink" href="../src/bitpacking/lib.rs.html#162-263" title="goto source code">[src]</a></span></h1><div class="docblock item-decl"><pre class="rust trait"><code>pub trait BitPacker: <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Sized.html" title="trait core::marker::Sized">Sized</a> + <a class="trait" href="https://doc.rust-lang.org/nightly/core/clone/trait.Clone.html" title="trait core::clone::Clone">Clone</a> + <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Copy.html" title="trait core::marker::Copy">Copy</a> {
    const <a href="#associatedconstant.BLOCK_LEN" class="constant">BLOCK_LEN</a>: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a>;

    fn <a href="#tymethod.new" class="fnname">new</a>() -&gt; Self;
<div class="item-spacer"></div>    fn <a href="#tymethod.compress" class="fnname">compress</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;self, <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;decompressed: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.slice.html">&amp;[</a><a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.u32.html">u32</a><a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.slice.html">]</a>, <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;compressed: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.slice.html">&amp;mut [</a><a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.u8.html">u8</a><a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.slice.html">]</a>, <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;num_bits: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.u8.html">u8</a><br>&nbsp;&nbsp;&nbsp;&nbsp;) -&gt; <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a>;
<div class="item-spacer"></div>    fn <a href="#tymethod.compress_sorted" class="fnname">compress_sorted</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;self, <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;initial: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.u32.html">u32</a>, <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;decompressed: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.slice.html">&amp;[</a><a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.u32.html">u32</a><a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.slice.html">]</a>, <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;compressed: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.slice.html">&amp;mut [</a><a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.u8.html">u8</a><a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.slice.html">]</a>, <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;num_bits: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.u8.html">u8</a><br>&nbsp;&nbsp;&nbsp;&nbsp;) -&gt; <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a>;
<div class="item-spacer"></div>    fn <a href="#tymethod.decompress" class="fnname">decompress</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;self, <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;compressed: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.slice.html">&amp;[</a><a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.u8.html">u8</a><a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.slice.html">]</a>, <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;decompressed: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.slice.html">&amp;mut [</a><a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.u32.html">u32</a><a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.slice.html">]</a>, <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;num_bits: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.u8.html">u8</a><br>&nbsp;&nbsp;&nbsp;&nbsp;) -&gt; <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a>;
<div class="item-spacer"></div>    fn <a href="#tymethod.decompress_sorted" class="fnname">decompress_sorted</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;self, <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;initial: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.u32.html">u32</a>, <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;compressed: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.slice.html">&amp;[</a><a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.u8.html">u8</a><a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.slice.html">]</a>, <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;decompressed: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.slice.html">&amp;mut [</a><a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.u32.html">u32</a><a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.slice.html">]</a>, <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;num_bits: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.u8.html">u8</a><br>&nbsp;&nbsp;&nbsp;&nbsp;) -&gt; <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a>;
<div class="item-spacer"></div>    fn <a href="#tymethod.num_bits" class="fnname">num_bits</a>(&amp;self, decompressed: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.slice.html">&amp;[</a><a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.u32.html">u32</a><a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.slice.html">]</a>) -&gt; <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.u8.html">u8</a>;
<div class="item-spacer"></div>    fn <a href="#tymethod.num_bits_sorted" class="fnname">num_bits_sorted</a>(&amp;self, initial: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.u32.html">u32</a>, decompressed: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.slice.html">&amp;[</a><a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.u32.html">u32</a><a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.slice.html">]</a>) -&gt; <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.u8.html">u8</a>;

    fn <a href="#method.compressed_block_size" class="fnname">compressed_block_size</a>(num_bits: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.u8.html">u8</a>) -&gt; <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a> { ... }
}</code></pre></div><details class="rustdoc-toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><h2 id="examples-without-delta-encoding" class="section-header"><a href="#examples-without-delta-encoding">Examples without delta-encoding</a></h2>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">extern</span> <span class="kw">crate</span> <span class="ident">bitpacking</span>;

<span class="kw">use</span> <span class="ident">bitpacking</span>::{<span class="ident">BitPacker4x</span>, <span class="ident">BitPacker</span>};


<span class="kw">let</span> <span class="ident">bitpacker</span> <span class="op">=</span> <span class="ident">BitPacker4x::new</span>();

<span class="kw">let</span> <span class="ident">num_bits</span>: <span class="ident">u8</span> <span class="op">=</span> <span class="ident">bitpacker</span>.<span class="ident">num_bits</span>(<span class="kw-2">&amp;</span><span class="ident">my_data</span>);

<span class="comment">// A block will be take at most 4 bytes per-integers.</span>
<span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">compressed</span> <span class="op">=</span> <span class="macro">vec!</span>[<span class="number">0u8</span>; <span class="number">4</span> <span class="op">*</span> <span class="ident">BitPacker4x::BLOCK_LEN</span>];

<span class="kw">let</span> <span class="ident">compressed_len</span> <span class="op">=</span> <span class="ident">bitpacker</span>.<span class="ident">compress</span>(<span class="kw-2">&amp;</span><span class="ident">my_data</span>, <span class="kw-2">&amp;mut</span> <span class="ident">compressed</span>[..], <span class="ident">num_bits</span>);

<span class="macro">assert_eq!</span>((<span class="ident">num_bits</span> <span class="kw">as</span> <span class="ident">usize</span>) <span class="op">*</span>  <span class="ident">BitPacker4x::BLOCK_LEN</span> <span class="op">/</span> <span class="number">8</span>, <span class="ident">compressed_len</span>);

<span class="comment">// Decompressing</span>
<span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">decompressed</span> <span class="op">=</span> <span class="macro">vec!</span>[<span class="number">0u32</span>; <span class="ident">BitPacker4x::BLOCK_LEN</span>];
<span class="ident">bitpacker</span>.<span class="ident">decompress</span>(<span class="kw-2">&amp;</span><span class="ident">compressed</span>[..<span class="ident">compressed_len</span>], <span class="kw-2">&amp;mut</span> <span class="ident">decompressed</span>[..], <span class="ident">num_bits</span>);

<span class="macro">assert_eq!</span>(<span class="kw-2">&amp;</span><span class="ident">my_data</span>, <span class="kw-2">&amp;</span><span class="ident">decompressed</span>);</code></pre></div>
<h2 id="examples-with-delta-encoding" class="section-header"><a href="#examples-with-delta-encoding">Examples with delta-encoding</a></h2>
<p>Delta-encoding makes it possible to store sorted integers in an efficient manner.
Rather than encoding the integers directly, the interval (or deltas) between each of them
are computed and then encoded.</p>
<p>Decoding then requires to first decode the deltas and then operate a cumulative sum (also called
integration or prefix sum) on them.</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">extern</span> <span class="kw">crate</span> <span class="ident">bitpacking</span>;

<span class="kw">use</span> <span class="ident">bitpacking</span>::{<span class="ident">BitPacker4x</span>, <span class="ident">BitPacker</span>};



<span class="comment">// The initial value is used to compute the first delta.</span>
<span class="comment">// In most use cases, you will be compressing long increasing</span>
<span class="comment">// integer sequences.</span>
<span class="comment">//</span>
<span class="comment">// You should probably pass an initial value of `0u32` to the</span>
<span class="comment">// first block if you do not have any information.</span>
<span class="comment">//</span>
<span class="comment">// When encoding the second block however, you will want to pass the last</span>
<span class="comment">// value of the first block.</span>
<span class="kw">let</span> <span class="ident">initial_value</span> <span class="op">=</span> <span class="number">0u32</span>;

<span class="kw">let</span> <span class="ident">bitpacker</span> <span class="op">=</span> <span class="ident">BitPacker4x::new</span>();

<span class="kw">let</span> <span class="ident">num_bits</span>: <span class="ident">u8</span> <span class="op">=</span> <span class="ident">bitpacker</span>.<span class="ident">num_bits_sorted</span>(<span class="ident">initial_value</span>, <span class="kw-2">&amp;</span><span class="ident">my_data</span>);

<span class="comment">// A block will be take at most 4 bytes per-integers.</span>
<span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">compressed</span> <span class="op">=</span> <span class="macro">vec!</span>[<span class="number">0u8</span>; <span class="number">4</span> <span class="op">*</span> <span class="ident">BitPacker4x::BLOCK_LEN</span>];


<span class="kw">let</span> <span class="ident">compressed_len</span> <span class="op">=</span> <span class="ident">bitpacker</span>.<span class="ident">compress_sorted</span>(<span class="ident">initial_value</span>, <span class="kw-2">&amp;</span><span class="ident">my_data</span>, <span class="kw-2">&amp;mut</span> <span class="ident">compressed</span>[..], <span class="ident">num_bits</span>);

<span class="macro">assert_eq!</span>((<span class="ident">num_bits</span> <span class="kw">as</span> <span class="ident">usize</span>) <span class="op">*</span>  <span class="ident">BitPacker4x::BLOCK_LEN</span> <span class="op">/</span> <span class="number">8</span>, <span class="ident">compressed_len</span>);

<span class="comment">// Decompressing</span>
<span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">decompressed</span> <span class="op">=</span> <span class="macro">vec!</span>[<span class="number">0u32</span>; <span class="ident">BitPacker4x::BLOCK_LEN</span>];

<span class="comment">// The initial value must be the same as the one passed</span>
<span class="comment">// when compressing the block.</span>
<span class="ident">bitpacker</span>.<span class="ident">decompress_sorted</span>(<span class="ident">initial_value</span>, <span class="kw-2">&amp;</span><span class="ident">compressed</span>[..<span class="ident">compressed_len</span>], <span class="kw-2">&amp;mut</span> <span class="ident">decompressed</span>[..], <span class="ident">num_bits</span>);

<span class="macro">assert_eq!</span>(<span class="kw-2">&amp;</span><span class="ident">my_data</span>, <span class="kw-2">&amp;</span><span class="ident">decompressed</span>);</code></pre></div>
</div></details><h2 id="associated-const" class="small-section-header">Associated Constants<a href="#associated-const" class="anchor"></a></h2><div class="methods"><details class="rustdoc-toggle" open><summary><div id="associatedconstant.BLOCK_LEN" class="method has-srclink"><div class="rightside"><a class="srclink" href="../src/bitpacking/lib.rs.html#164" title="goto source code">[src]</a></div><h4 class="code-header">const <a href="#associatedconstant.BLOCK_LEN" class="constant">BLOCK_LEN</a>: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a></h4></div></summary><div class="docblock"><p>Number of <code>u32</code> per compressed block</p>
</div></details></div><h2 id="required-methods" class="small-section-header">Required methods<a href="#required-methods" class="anchor"></a></h2><div class="methods"><details class="rustdoc-toggle" open><summary><div id="tymethod.new" class="method has-srclink"><div class="rightside"><a class="srclink" href="../src/bitpacking/lib.rs.html#172" title="goto source code">[src]</a></div><h4 class="code-header">fn <a href="#tymethod.new" class="fnname">new</a>() -&gt; Self</h4></div></summary><div class="docblock"><p>Checks the available instructions set on the current
CPU and returns the best available implementation.</p>
<p>Calling <code>.new()</code> is extremely cheap, and does not
require any heap allocation. It is <em>not</em> required to cache
its result too aggressively.</p>
</div></details><details class="rustdoc-toggle" open><summary><div id="tymethod.compress" class="method has-srclink"><div class="rightside"><a class="srclink" href="../src/bitpacking/lib.rs.html#185" title="goto source code">[src]</a></div><h4 class="code-header">fn <a href="#tymethod.compress" class="fnname">compress</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;self, <br>&nbsp;&nbsp;&nbsp;&nbsp;decompressed: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.slice.html">&amp;[</a><a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.u32.html">u32</a><a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.slice.html">]</a>, <br>&nbsp;&nbsp;&nbsp;&nbsp;compressed: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.slice.html">&amp;mut [</a><a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.u8.html">u8</a><a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.slice.html">]</a>, <br>&nbsp;&nbsp;&nbsp;&nbsp;num_bits: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.u8.html">u8</a><br>) -&gt; <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a></h4></div></summary><div class="docblock"><p>Compress a block of <code>u32</code>.</p>
<p>Assumes that the integers are all lower than <code>2^num_bits</code>.
The result is undefined if they are larger.</p>
<p>Returns the amount of bytes of the compressed block.</p>
<h5 id="panics" class="section-header"><a href="#panics">Panics</a></h5>
<ul>
<li>Panics if the compressed destination array is too small</li>
<li>Panics if <code>decompressed</code> length is not exactly the <code>BLOCK_LEN</code>.</li>
</ul>
</div></details><details class="rustdoc-toggle" open><summary><div id="tymethod.compress_sorted" class="method has-srclink"><div class="rightside"><a class="srclink" href="../src/bitpacking/lib.rs.html#206-212" title="goto source code">[src]</a></div><h4 class="code-header">fn <a href="#tymethod.compress_sorted" class="fnname">compress_sorted</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;self, <br>&nbsp;&nbsp;&nbsp;&nbsp;initial: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.u32.html">u32</a>, <br>&nbsp;&nbsp;&nbsp;&nbsp;decompressed: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.slice.html">&amp;[</a><a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.u32.html">u32</a><a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.slice.html">]</a>, <br>&nbsp;&nbsp;&nbsp;&nbsp;compressed: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.slice.html">&amp;mut [</a><a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.u8.html">u8</a><a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.slice.html">]</a>, <br>&nbsp;&nbsp;&nbsp;&nbsp;num_bits: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.u8.html">u8</a><br>) -&gt; <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a></h4></div></summary><div class="docblock"><p>Delta encode and compressed the <code>decompressed</code> array.</p>
<p>Assumes that the elements in the <code>decompressed</code> array are sorted.
<code>initial</code> will be used to compute the first <code>delta</code>.</p>
<h5 id="panics-1" class="section-header"><a href="#panics-1">Panics</a></h5>
<ul>
<li>Panics if <code>initial</code> is greater than <code>decompressed[0]</code></li>
<li>Panics if <code>decompressed</code> is not sorted</li>
<li>Panics if <code>decompressed</code>’s length is not exactly <code>BLOCK_LEN</code></li>
<li>Panics if <code>compressed</code> is not large enough to receive the compressed data</li>
<li>Panics if the compressed destination array is too small.</li>
</ul>
<p>Returns the amount of bytes of the compressed block.</p>
<h5 id="panics-2" class="section-header"><a href="#panics-2">Panics</a></h5>
<ul>
<li>Panics if the compressed array is too short.</li>
<li>Panics if the decompressed array is not exactly the <code>BLOCK_LEN</code>.</li>
</ul>
</div></details><details class="rustdoc-toggle" open><summary><div id="tymethod.decompress" class="method has-srclink"><div class="rightside"><a class="srclink" href="../src/bitpacking/lib.rs.html#221" title="goto source code">[src]</a></div><h4 class="code-header">fn <a href="#tymethod.decompress" class="fnname">decompress</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;self, <br>&nbsp;&nbsp;&nbsp;&nbsp;compressed: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.slice.html">&amp;[</a><a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.u8.html">u8</a><a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.slice.html">]</a>, <br>&nbsp;&nbsp;&nbsp;&nbsp;decompressed: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.slice.html">&amp;mut [</a><a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.u32.html">u32</a><a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.slice.html">]</a>, <br>&nbsp;&nbsp;&nbsp;&nbsp;num_bits: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.u8.html">u8</a><br>) -&gt; <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a></h4></div></summary><div class="docblock"><p>Decompress the <code>compress</code> array to the <code>decompressed</code> array.</p>
<p>Returns the amount of bytes that were consumed.</p>
<h5 id="panics-3" class="section-header"><a href="#panics-3">Panics</a></h5>
<p>Panics if the compressed array is too short, or the decompressed array is too short.</p>
</div></details><details class="rustdoc-toggle" open><summary><div id="tymethod.decompress_sorted" class="method has-srclink"><div class="rightside"><a class="srclink" href="../src/bitpacking/lib.rs.html#235-241" title="goto source code">[src]</a></div><h4 class="code-header">fn <a href="#tymethod.decompress_sorted" class="fnname">decompress_sorted</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;self, <br>&nbsp;&nbsp;&nbsp;&nbsp;initial: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.u32.html">u32</a>, <br>&nbsp;&nbsp;&nbsp;&nbsp;compressed: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.slice.html">&amp;[</a><a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.u8.html">u8</a><a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.slice.html">]</a>, <br>&nbsp;&nbsp;&nbsp;&nbsp;decompressed: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.slice.html">&amp;mut [</a><a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.u32.html">u32</a><a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.slice.html">]</a>, <br>&nbsp;&nbsp;&nbsp;&nbsp;num_bits: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.u8.html">u8</a><br>) -&gt; <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a></h4></div></summary><div class="docblock"><p>Decompress the<code>compress</code>array to the <code>decompressed</code> array.
The <code>compressed</code> array is assumed to have been delta-encoded and compressed.</p>
<p><code>initial</code> must be the value that was passed as the <code>initial</code> argument compressing
the block.</p>
<p>Returns the amount of bytes that have been read.</p>
<h5 id="panics-4" class="section-header"><a href="#panics-4">Panics</a></h5>
<ul>
<li>Panics if the compressed array is too short to contain <code>BLOCK_LEN</code> elements</li>
<li>Panics if the decompressed array is too short.</li>
</ul>
</div></details><details class="rustdoc-toggle" open><summary><div id="tymethod.num_bits" class="method has-srclink"><div class="rightside"><a class="srclink" href="../src/bitpacking/lib.rs.html#249" title="goto source code">[src]</a></div><h4 class="code-header">fn <a href="#tymethod.num_bits" class="fnname">num_bits</a>(&amp;self, decompressed: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.slice.html">&amp;[</a><a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.u32.html">u32</a><a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.slice.html">]</a>) -&gt; <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.u8.html">u8</a></h4></div></summary><div class="docblock"><p>Returns the minimum number of bits used to represent the largest integer in the
<code>decompressed</code> block.</p>
<h5 id="panics-5" class="section-header"><a href="#panics-5">Panics</a></h5>
<p>Panics if <code>decompressed</code>’s len is not exactly <code>BLOCK_LEN</code>.</p>
</div></details><details class="rustdoc-toggle" open><summary><div id="tymethod.num_bits_sorted" class="method has-srclink"><div class="rightside"><a class="srclink" href="../src/bitpacking/lib.rs.html#257" title="goto source code">[src]</a></div><h4 class="code-header">fn <a href="#tymethod.num_bits_sorted" class="fnname">num_bits_sorted</a>(&amp;self, initial: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.u32.html">u32</a>, decompressed: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.slice.html">&amp;[</a><a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.u32.html">u32</a><a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.slice.html">]</a>) -&gt; <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.u8.html">u8</a></h4></div></summary><div class="docblock"><p>Returns the minimum number of bits used to represent the largest <code>delta</code> in the deltas in the
<code>decompressed</code> block.</p>
<h5 id="panics-6" class="section-header"><a href="#panics-6">Panics</a></h5>
<p>Panics if <code>decompressed</code>’s len is not exactly <code>BLOCK_LEN</code>.</p>
</div></details></div><h2 id="provided-methods" class="small-section-header">Provided methods<a href="#provided-methods" class="anchor"></a></h2><div class="methods"><details class="rustdoc-toggle" open><summary><div id="method.compressed_block_size" class="method has-srclink"><div class="rightside"><a class="srclink" href="../src/bitpacking/lib.rs.html#260-262" title="goto source code">[src]</a></div><h4 class="code-header">fn <a href="#method.compressed_block_size" class="fnname">compressed_block_size</a>(num_bits: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.u8.html">u8</a>) -&gt; <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a></h4></div></summary><div class="docblock"><p>Returns the size of a compressed block.</p>
</div></details></div><h2 id="implementors" class="small-section-header">Implementors<a href="#implementors" class="anchor"></a></h2><div class="item-list" id="implementors-list"><details class="rustdoc-toggle implementors-toggle"><summary><div id="impl-BitPacker" class="impl has-srclink"><div class="rightside"><a class="srclink" href="../src/bitpacking/bitpacker1x.rs.html#66-122" title="goto source code">[src]</a></div><a href="#impl-BitPacker" class="anchor"></a><h3 class="code-header in-band">impl <a class="trait" href="trait.BitPacker.html" title="trait bitpacking::BitPacker">BitPacker</a> for <a class="struct" href="struct.BitPacker1x.html" title="struct bitpacking::BitPacker1x">BitPacker1x</a></h3></div></summary><div class="impl-items"><div id="associatedconstant.BLOCK_LEN-1" class="associatedconstant trait-impl has-srclink"><div class="rightside"><a class="srclink" href="../src/bitpacking/bitpacker1x.rs.html#67" title="goto source code">[src]</a></div><a href="#associatedconstant.BLOCK_LEN-1" class="anchor"></a><h4 class="code-header">const <a href="#associatedconstant.BLOCK_LEN" class="constant">BLOCK_LEN</a>: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a></h4></div></div></details><details class="rustdoc-toggle implementors-toggle"><summary><div id="impl-BitPacker-1" class="impl has-srclink"><div class="rightside"><a class="srclink" href="../src/bitpacking/bitpacker4x_simple.rs.html#90-147" title="goto source code">[src]</a></div><a href="#impl-BitPacker-1" class="anchor"></a><h3 class="code-header in-band">impl <a class="trait" href="trait.BitPacker.html" title="trait bitpacking::BitPacker">BitPacker</a> for <a class="struct" href="struct.BitPacker4x.html" title="struct bitpacking::BitPacker4x">BitPacker4x</a></h3></div></summary><div class="impl-items"><div id="associatedconstant.BLOCK_LEN-2" class="associatedconstant trait-impl has-srclink"><div class="rightside"><a class="srclink" href="../src/bitpacking/bitpacker4x_simple.rs.html#91" title="goto source code">[src]</a></div><a href="#associatedconstant.BLOCK_LEN-2" class="anchor"></a><h4 class="code-header">const <a href="#associatedconstant.BLOCK_LEN" class="constant">BLOCK_LEN</a>: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a></h4></div></div></details><details class="rustdoc-toggle implementors-toggle"><summary><div id="impl-BitPacker-2" class="impl has-srclink"><div class="rightside"><a class="srclink" href="../src/bitpacking/bitpacker8x.rs.html#205-321" title="goto source code">[src]</a></div><a href="#impl-BitPacker-2" class="anchor"></a><h3 class="code-header in-band">impl <a class="trait" href="trait.BitPacker.html" title="trait bitpacking::BitPacker">BitPacker</a> for <a class="struct" href="struct.BitPacker8x.html" title="struct bitpacking::BitPacker8x">BitPacker8x</a></h3></div></summary><div class="impl-items"><div id="associatedconstant.BLOCK_LEN-3" class="associatedconstant trait-impl has-srclink"><div class="rightside"><a class="srclink" href="../src/bitpacking/bitpacker8x.rs.html#206" title="goto source code">[src]</a></div><a href="#associatedconstant.BLOCK_LEN-3" class="anchor"></a><h4 class="code-header">const <a href="#associatedconstant.BLOCK_LEN" class="constant">BLOCK_LEN</a>: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a></h4></div></div></details></div><script type="text/javascript" src="../implementors/bitpacking/trait.BitPacker.js" async></script></section><section id="search" class="content hidden"></section></div></main><div id="rustdoc-vars" data-root-path="../" data-current-crate="bitpacking" data-themes="ayu,dark,light" data-resource-suffix="" data-rustdoc-version="1.59.0-nightly (cfa3fe5af 2021-12-31)" ></div>
</body></html>